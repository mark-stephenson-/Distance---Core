<?php $__env->startSection('header'); ?>
    <h1>App Distribution</h1>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('body'); ?>
    <h2>Current Versions</h2>

    <?php echo Form::open(array('url' => route('app-distribution.update', array(CORE_APP_ID)))); ?>

    <table class="table table-striped">
        <thead>
            <tr>
                <th width="25%">iOS Production</th>
                <th width="25%">Android Production</th>
                <th width="25%">iOS Testing</th>
                <th width="25%">Android Testing</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><?php echo @Ota::ios()->production()->current()->build_string ?: '-'; ?></td>
                <td><?php echo @Ota::android()->production()->current()->build_string ?: '-'; ?></td>
                <td><?php echo @Ota::ios()->testing()->current()->build_string ?: '-'; ?></td>
                <td><?php echo @Ota::android()->testing()->current()->build_string ?: '-'; ?></td>
            </tr>

            <tr>
                <td colspan="4" height="10px"></td>
            </tr>
            <tr>
                <td colspan="2">
                    <?php echo Form::text('', URL::to('ota/download'), array('class' => 'span10', 'style' => 'text-align: center', 'disabled')); ?>

                </td>
                <td colspan="2">
                    <?php echo Form::text('', URL::to('ota/download/testing'), array('class' => 'span10', 'style' => 'text-align: center', 'disabled')); ?>

                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <p>Production Password</p>
                    <?php echo Form::text('production_password', Setting::getConfig('ota-production_password'), array('class' => 'span10', 'style' => 'text-align: center')); ?>

                </td>
                <td colspan="2">
                    <p>Testing Password</p>
                    <?php echo Form::text('testing_password', Setting::getConfig('ota-testing_password'), array('class' => 'span10', 'style' => 'text-align: center')); ?>

                </td>
            </tr>
            <tr>
                <td colspan="4">
                    <a href="<?php echo route('app-distribution.create', array(CORE_APP_ID)); ?>" class="btn">Upload New Version</a>
                    <?php echo Form::submit('Save Passwords', array('class' => 'btn btn-primary')); ?>

                </td>
            </tr>
        </tbody>
    </table>
    <?php echo Form::close(); ?>


    <hr />

    <h2>Previous Versions</h2>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>iOS Production</th>
                <th>Android Production</th>
                <th>iOS Testing</th>
                <th>Android Testing</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <?php if( $versions = Ota::ios()->production()->order()->get() and count($versions) ): ?>
                        <?php foreach( $versions as $v ): ?>
                            <?php echo $v->build_string; ?><br />
                        <?php endforeach; ?>
                    <?php else: ?>
                        -
                    <?php endif; ?>
                </td>
                <td>
                    <?php if( $versions = Ota::android()->production()->order()->get() and count($versions) ): ?>
                        <?php foreach( $versions as $v ): ?>
                            <?php echo $v->build_string; ?><br />
                        <?php endforeach; ?>
                    <?php else: ?>
                        -
                    <?php endif; ?>
                </td>
                <td>
                    <?php if( $versions = Ota::ios()->testing()->order()->get() and count($versions)): ?>
                        <?php foreach( $versions as $v ): ?>
                            <?php echo $v->build_string; ?><br />
                        <?php endforeach; ?>
                    <?php else: ?>
                        -
                    <?php endif; ?>
                </td>
                <td>
                    <?php if( $versions = Ota::android()->testing()->order()->get() and count($versions)): ?>
                        <?php foreach( $versions as $v ): ?>
                            <?php echo $v->build_string; ?><br />
                        <?php endforeach; ?>
                    <?php else: ?>
                        -
                    <?php endif; ?>
                </td>
            </tr>
        </tbody>
    </table>

    <style>
        .table th, .table td { text-align: center !important }
    </style>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('layouts.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>